<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SwarmSpace — Developer Signup</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500&family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #080c0a; --surface: #0d1410; --green: #00e676;
  --green-dim: rgba(0,230,118,0.5); --green-ghost: rgba(0,230,118,0.07);
  --text: #e8f0eb; --muted: #5a7060; --border: rgba(0,255,128,0.12);
  --amber: #ffb300; --red: #ff4444;
}
body { background: var(--bg); color: var(--text); font-family: 'IBM Plex Sans', sans-serif; font-weight: 300; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem; }

nav { position: fixed; top: 0; left: 0; right: 0; padding: 1.2rem 3rem; display: flex; justify-content: space-between; align-items: center; background: rgba(8,12,10,0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); }
.nav-logo { font-family: 'IBM Plex Mono', monospace; font-size: 0.85rem; font-weight: 500; color: var(--text); text-decoration: none; display: flex; align-items: center; gap: 0.6rem; }
.logo-mark { width: 18px; height: 18px; border: 1.5px solid var(--green); display: flex; align-items: center; justify-content: center; }
.logo-mark::before { content: ''; width: 7px; height: 7px; background: var(--green); animation: pulse 2s ease infinite; }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.4;transform:scale(0.7)} }

.card { width: 100%; max-width: 440px; background: var(--surface); border: 1px solid var(--border); padding: 3rem; margin-top: 4rem; }
.card-title { font-family: 'IBM Plex Mono', monospace; font-size: 1.1rem; font-weight: 500; margin-bottom: 0.4rem; }
.card-sub { font-size: 0.83rem; color: var(--muted); margin-bottom: 2.5rem; line-height: 1.6; }

.form-group { margin-bottom: 1.2rem; }
label { display: block; font-family: 'IBM Plex Mono', monospace; font-size: 0.62rem; letter-spacing: 0.15em; text-transform: uppercase; color: var(--muted); margin-bottom: 0.5rem; }
input { width: 100%; padding: 0.8rem 1rem; background: var(--bg); border: 1px solid var(--border); color: var(--text); font-family: 'IBM Plex Mono', monospace; font-size: 0.82rem; outline: none; transition: border-color 0.2s; }
input:focus { border-color: var(--green-dim); }
input::placeholder { color: var(--muted); }

.btn { width: 100%; padding: 0.9rem; background: var(--green); color: var(--bg); font-family: 'IBM Plex Mono', monospace; font-size: 0.78rem; font-weight: 500; letter-spacing: 0.08em; border: none; cursor: pointer; transition: background 0.2s; margin-top: 0.5rem; }
.btn:hover { background: #00c853; }
.btn:disabled { background: var(--muted); cursor: not-allowed; }

.btn-ghost { width: 100%; padding: 0.9rem; background: transparent; color: var(--muted); font-family: 'IBM Plex Mono', monospace; font-size: 0.78rem; letter-spacing: 0.08em; border: 1px solid var(--border); cursor: pointer; transition: color 0.2s, border-color 0.2s; margin-top: 0.8rem; }
.btn-ghost:hover { color: var(--text); border-color: var(--green-dim); }

.divider { display: flex; align-items: center; gap: 1rem; margin: 1.5rem 0; color: var(--muted); font-family: 'IBM Plex Mono', monospace; font-size: 0.62rem; letter-spacing: 0.1em; }
.divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }

.msg { padding: 0.8rem 1rem; font-family: 'IBM Plex Mono', monospace; font-size: 0.72rem; line-height: 1.5; margin-bottom: 1rem; display: none; }
.msg.error { background: rgba(255,68,68,0.08); border-left: 2px solid var(--red); color: #ff8a80; }
.msg.success { background: var(--green-ghost); border-left: 2px solid var(--green); color: var(--green); }

.toggle { text-align: center; margin-top: 1.5rem; font-family: 'IBM Plex Mono', monospace; font-size: 0.68rem; color: var(--muted); }
.toggle a { color: var(--green-dim); text-decoration: none; cursor: pointer; }
.toggle a:hover { color: var(--green); }

.plan-badge { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--green-ghost); border: 1px solid var(--border); padding: 0.4rem 0.8rem; font-family: 'IBM Plex Mono', monospace; font-size: 0.62rem; letter-spacing: 0.1em; color: var(--green-dim); margin-bottom: 2rem; }
</style>
</head>
<body>

<nav>
  <a href="/" class="nav-logo">
    <div class="logo-mark"></div>
    SwarmSpace
  </a>
</nav>

<div class="card">
  <div class="plan-badge">✓ Free tier — no credit card required</div>
  <h1 class="card-title">Create your account</h1>
  <p class="card-sub">List your capability in SwarmSpace and get discovered by AI agents. Upgrade to Verified anytime for $29/mo.</p>

  <div id="msg-box" class="msg"></div>

  <!-- SIGN UP FORM -->
  <div id="signup-form">
    <div class="form-group">
      <label>Email</label>
      <input type="email" id="email" placeholder="you@yourproject.dev" autocomplete="email">
    </div>
    <div class="form-group">
      <label>Password</label>
      <input type="password" id="password" placeholder="Min. 8 characters" autocomplete="new-password">
    </div>
    <button class="btn" id="signup-btn" onclick="handleSignup()">Create account →</button>

    <div class="divider">or</div>
    <button class="btn-ghost" onclick="handleGithub()">Continue with GitHub</button>

    <p class="toggle">Already have an account? <a onclick="showLogin()">Sign in</a></p>
  </div>

  <!-- LOGIN FORM -->
  <div id="login-form" style="display:none">
    <div class="form-group">
      <label>Email</label>
      <input type="email" id="login-email" placeholder="you@yourproject.dev" autocomplete="email">
    </div>
    <div class="form-group">
      <label>Password</label>
      <input type="password" id="login-password" placeholder="Your password" autocomplete="current-password">
    </div>
    <button class="btn" id="login-btn" onclick="handleLogin()">Sign in →</button>

    <div class="divider">or</div>
    <button class="btn-ghost" onclick="handleGithub()">Continue with GitHub</button>

    <p class="toggle">No account yet? <a onclick="showSignup()">Sign up free</a></p>
  </div>
</div>

<script>
  // ── CONFIG ──────────────────────────────────────────────────────
  // Replace these with your Supabase project values
  const SUPABASE_URL = 'https://hzboqpnmokhllvydknjz.supabase.co';
  const SUPABASE_ANON_KEY = 'sb_publishable_s_4jnWqudwyHFv81Y7jmng_jxWnD_6a';
  // ────────────────────────────────────────────────────────────────

  const { createClient } = supabase;
  const sb = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  // Redirect if already logged in
  sb.auth.getSession().then(({ data: { session } }) => {
    if (session) window.location.href = '/dashboard.html';
  });

  function showMsg(text, type) {
    const el = document.getElementById('msg-box');
    el.textContent = text;
    el.className = `msg ${type}`;
    el.style.display = 'block';
  }

  function setLoading(btnId, loading) {
    const btn = document.getElementById(btnId);
    btn.disabled = loading;
    btn.textContent = loading ? 'Please wait...' : (btnId === 'signup-btn' ? 'Create account →' : 'Sign in →');
  }

  async function handleSignup() {
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;
    if (!email || !password) return showMsg('Please fill in all fields.', 'error');
    if (password.length < 8) return showMsg('Password must be at least 8 characters.', 'error');

    setLoading('signup-btn', true);
    const { error } = await sb.auth.signUp({ email, password });
    setLoading('signup-btn', false);

    if (error) return showMsg(error.message, 'error');
    showMsg('✓ Check your email to confirm your account, then sign in.', 'success');
  }

  async function handleLogin() {
    const email = document.getElementById('login-email').value.trim();
    const password = document.getElementById('login-password').value;
    if (!email || !password) return showMsg('Please fill in all fields.', 'error');

    setLoading('login-btn', true);
    const { error } = await sb.auth.signInWithPassword({ email, password });
    setLoading('login-btn', false);

    if (error) return showMsg(error.message, 'error');
    window.location.href = '/dashboard.html';
  }

  async function handleGithub() {
    const { error } = await sb.auth.signInWithOAuth({
      provider: 'github',
      options: { redirectTo: `${window.location.origin}/dashboard.html` }
    });
    if (error) showMsg(error.message, 'error');
  }

  function showLogin() {
    document.getElementById('signup-form').style.display = 'none';
    document.getElementById('login-form').style.display = 'block';
    document.getElementById('msg-box').style.display = 'none';
  }

  function showSignup() {
    document.getElementById('login-form').style.display = 'none';
    document.getElementById('signup-form').style.display = 'block';
    document.getElementById('msg-box').style.display = 'none';
  }
</script>
</body>
</html>
